<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MockBank API – Projekt</title>

    <!-- Twoje style -->
    <link rel="stylesheet" href="../assets/css/style_app.css" />
    <link rel="stylesheet" href="../assets/css/style.css" />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <meta
      name="description"
      content="MockBank API: NestJS + MongoDB. Konta, transakcje, webhooki HMAC, endpoint integracyjny dla Budżetownika. Wdrożenie na Render (free tier – cold start możliwy)."
    />
  </head>
  <body>
    <section class="project-page">
      <div class="container">
        <a href="../index.html#projects" class="back"
          >← Powrót do strony głównej</a
        >

        <h1>MockBank API</h1>
        <p class="intro">
          Serwis bankowy typu <em>mock</em> zbudowany w
          <strong>NestJS</strong> + <strong>MongoDB</strong>. Służy do symulacji
          kont i transakcji oraz integracji z systemami zewnętrznymi <br />(np.
          <a href="/projects/budzetownik.html">Budżetownik</a>). Wdrożony na
          <strong>Render</strong>, gotowy do testów integracyjnych i
          automatycznej synchronizacji.
        </p>

        <ul class="tech-list" aria-label="Wykorzystane technologie">
          <li>NestJS (TypeScript)</li>
          <li>MongoDB (Mongoose)</li>
          <li>JWT (Access/Refresh)</li>
          <li>Webhooki</li>
          <li>Docker &amp; Render</li>
        </ul>

        <!-- Co potrafi / Architektura -->
        <div class="o-projekcie o-projekcie-grid">
          <div class="column">
            <h3>Co potrafi MockBank</h3>
            <p>
              <strong>MockBank</strong> to nowoczesne, sandboxowe
              <strong>API bankowe</strong> stworzone w technologii
              <strong>NestJS</strong>, które pozwala symulować rzeczywiste
              operacje finansowe — od rejestracji użytkowników i zakładania kont
              po pełną obsługę transakcji i integrację z zewnętrznymi
              aplikacjami.
            </p>

            <p>
              System umożliwia <strong>tworzenie wielu kont</strong> z
              niezależnym saldem, <strong>symulowanie transakcji</strong> z
              automatyczną aktualizacją oraz <strong>podgląd historii</strong> i
              salda w czasie rzeczywistym. Dane zwracane są w ujednoliconym
              formacie, co ułatwia testy i analizę.
            </p>

            <p>
              MockBank obsługuje <strong>integracje dwukierunkowe</strong>
              <em>push</em> (webhooki podpisywane
              <strong>HMAC-SHA256</strong> dla natychmiastowych powiadomień)
              oraz <em>pull</em> (endpointy REST do cyklicznej synchronizacji
              danych). Całość uzupełniają wbudowane
              <strong>mechanizmy bezpieczeństwa</strong> i stabilności:
              <code>/healthz</code>, <code>/readyz</code>, walidacja
              <strong>DTO</strong>, <strong>rate limiting</strong>,
              <strong>CORS</strong> oraz nagłówki ochronne (<em>Helmet</em>),
              które zapewniają przewidywalne działanie środowiska testowego.
            </p>
          </div>

          <div class="column">
            <h3>Architektura i bezpieczeństwo</h3>
            <p>
              Projekt opiera się na
              <strong>modularnej architekturze</strong> osobne moduły
              <code>auth</code>, <code>accounts</code>,
              <code>transactions</code>, <code>webhooks</code>,
              <code>integrations</code> i <code>system</code> odpowiadają za
              jasno wydzielone obszary logiki, co ułatwia utrzymanie i rozwój.
              Uwierzytelnianie oparte jest o <strong>JWT</strong>, a hasła
              zabezpieczane są przy użyciu <strong>argon2</strong>. Sekrety
              webhooków szyfrowane są algorytmem <strong>AES</strong>, a
              wszystkie powiadomienia podpisywane <strong>HMAC-SHA256</strong> w
              nagłówkach, co gwarantuje integralność i autentyczność danych.
            </p>

            <p>
              Publiczny endpoint integracyjny jest chroniony przez
              <strong>API-key</strong> w nagłówku Bearer, co umożliwia
              testowanie integracji bez konieczności zarządzania tokenami
              użytkowników. Cała architektura została zaprojektowana z myślą o
              <strong>modularności</strong>,
              <strong>separacji odpowiedzialności</strong> i
              <strong>łatwym rozszerzaniu</strong> o kolejne usługi (np.
              płatności, multiwaluty, logi bezpieczeństwa), dzięki czemu projekt
              pozostaje <strong>elastyczny, bezpieczny i skalowalny</strong>.
            </p>
          </div>
        </div>

        <div class="endpoints-grid">
          <!-- LEWA KARTA -->
          <div class="endpoints-card">
            <h3>Endpointy – core</h3>

            <div class="ep-group">
              <h4>Auth</h4>
              <div class="ep">
                <span class="verb post">POST</span
                ><code>/v1/auth/register</code>
              </div>
              <div class="ep">
                <span class="verb post">POST</span><code>/v1/auth/login</code>
              </div>
              <div class="ep">
                <span class="verb post">POST</span><code>/v1/auth/refresh</code>
              </div>
            </div>

            <div class="ep-group">
              <h4>Konta</h4>
              <div class="ep">
                <span class="verb get">GET</span><code>/v1/accounts</code>
              </div>
              <div class="ep">
                <span class="verb post">POST</span><code>/v1/accounts</code>
              </div>
              <div class="ep">
                <span class="verb post">POST</span>
                <code>/v1/accounts/:id/close</code>
                <span class="note">saldo=0, potwierdzenie nazwą i hasłem</span>
              </div>
            </div>

            <div class="ep-group">
              <h4>Transakcje</h4>
              <div class="ep">
                <span class="verb get">GET</span>
                <code
                  >/v1/accounts/:id/transactions?from&amp;to&amp;page&amp;limit</code
                >
              </div>
              <div class="ep">
                <span class="verb post">POST</span>
                <code>/v1/simulations/transaction</code>
                <span class="note">tworzy wpis i aktualizuje saldo</span>
              </div>
            </div>
          </div>

          <!-- PRAWA KARTA -->
          <div class="endpoints-card">
            <h3>Endpointy – integracje</h3>

            <div class="ep-group">
              <h4>Webhooki (push)</h4>
              <div class="ep">
                <span class="verb post">POST</span><code>/v1/webhooks</code
                ><span class="note"
                  >rejestracja: url, secret, events[], clientId</span
                >
              </div>
              <div class="ep">
                <span class="verb get">GET</span
                ><code>/v1/webhooks?clientId=...</code>
              </div>
              <div class="ep stacked">
                <span class="label">Zdarzenie</span
                ><code>transaction.created</code>
                <span class="label">Nagłówki</span>
                <code>X-MockBank-Timestamp</code
                ><code>X-MockBank-Idempotency-Key</code
                ><code>X-MockBank-Signature</code>
              </div>
            </div>

            <div class="ep-group">
              <h4>Pull API</h4>
              <div class="ep">
                <span class="verb get">GET</span>
                <code
                  >/api/owner/:owner/transactions?from=YYYY-MM-DD&amp;to=YYYY-MM-DD</code
                >
              </div>
              <div class="ep">
                <span class="label">Auth</span
                ><code>Authorization: Bearer &lt;API_KEY&gt;</code>
              </div>
              <div class="ep">
                <span class="label">owner</span><code>ObjectId</code
                ><code>pełny e-mail</code><code>prefiks e-mail (user+coś)</code>
              </div>
            </div>
          </div>
        </div>

        <!-- Format danych -->
        <div class="data-format">
          <div class="data-card">
            <h3>Transakcje</h3>
            <pre><code>{
  "id": "652123…",
  "externalTxnId": "tx_abcd1234",
  "accountId": "651fff…",
  "amount": -1299,            
  "currency": "PLN",
  "date": "2025-10-05T18:41:00.000Z",
  "description": "Testowa transakcja",
  "raw": { "source": "simulator" }
}</code></pre>
            <p>
              Dane transakcji zwracane są w
              <strong>spójnym formacie JSON</strong> — kwoty w groszach (typ
              <code>int</code>), daty w standardzie
              <strong>ISO-8601 (UTC)</strong>. Aktualnie obsługiwana jest tylko
              waluta <strong>PLN</strong>, a struktura danych jest gotowa na
              rozszerzenie o inne waluty w przyszłych wersjach.
            </p>
            <p class="note">
              Wszystkie endpointy zwracają również spójny kontrakt błędów (JSON
              z <code>traceId</code>, <code>code</code>, <code>message</code>),
              co ułatwia integrację i testowanie.
            </p>
          </div>
        </div>

        <!-- Deployment (zwięźle) -->

        <div class="env-card single">
          <h3>Uruchomienie w skrócie</h3>
          <ul class="pill-list">
            <li>Docker (kontener)</li>
            <li>Render (hosting produkcyjny)</li>
            <li>Health-checki: /healthz • /readyz</li>
          </ul>
          <p class="muted">
            Projekt gotowy do rozbudowy i dostosowań na potrzeby innych
            aplikacji.
          </p>
        </div>

        <!-- Linki -->
        <div class="project-links">
          <a
            href="https://github.com/mareksigmund/Projekty/tree/main/MockBankAPI"
            target="_blank"
            rel="noopener"
            class="btn primary"
          >
            <svg
              class="github-icon"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 16 16"
              fill="currentColor"
              width="20"
              height="20"
            >
              <path
                d="M8 0C3.58 0 0 3.58 0 8a8 8 0 005.47 7.59c.4.07.55-.17.55-.38v-1.33c-2.23.48-2.7-1.08-2.7-1.08-.36-.91-.88-1.15-.88-1.15-.72-.5.06-.49.06-.49.8.06 1.22.83 1.22.83.71 1.21 1.86.86 2.31.66.07-.52.28-.86.5-1.06-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.58.82-2.14-.08-.2-.36-1.01.08-2.1 0 0 .67-.21 2.2.82A7.63 7.63 0 018 4.59a7.6 7.6 0 012 .27c1.53-1.03 2.2-.82 2.2-.82.44 1.09.16 1.9.08 2.1.51.56.82 1.27.82 2.14 0 3.07-1.87 3.75-3.65 3.95.28.24.53.73.53 1.48v2.2c0 .21.15.46.55.38A8 8 0 0016 8c0-4.42-3.58-8-8-8z"
              />
            </svg>
            Zobacz kod na GitHub
          </a>

          <a
            href="https://mockbank-iaco.onrender.com/healthz"
            target="_blank"
            rel="noopener"
            class="btn secondary"
            title="Uruchamia publiczne API – przy pierwszym wywołaniu może potrwać dłużej (Render free)."
          >
            🌐 Demo /healthz
          </a>
        </div>

        <!-- Notka o Renderze -->
        <p class="note-warn">
          <strong>Uwaga:</strong> API działa na darmowym planie <em>Render</em>,
          więc po bezczynności serwis może się „uśpić”. Kliknięcie
          <em>Demo – /healthz</em> wybudza instancję — pierwszy response może
          potrwać nieco dłużej.
        </p>
      </div>
    </section>

    <footer>
      <div class="footer-container">
        <p class="footer-name">© 2025 Marek Sigmund</p>
        <p class="footer-tagline">Stworzone z pasją i odrobiną kawy ☕</p>
        <div class="footer-links">
          <a href="../assets/cv/CV_Marek.pdf" target="_blank">CV</a>
          <a href="https://github.com/mareksigmund/Projekty" target="_blank"
            >GitHub</a
          >
          <a
            href="https://www.linkedin.com/in/marek-sigmund-235164357"
            target="_blank"
            >LinkedIn</a
          >
          <a href="mailto:m.sigmund@o2.pl">E-mail</a>
        </div>
      </div>
    </footer>
  </body>
</html>
